# APDL项目设计文档总览

## 文档修订历史
- 版本: 1.0
- 日期: 2026年1月29日
- 描述: APDL项目设计文档结构总览

## 1. 项目概述

APDL（APDS Protocol Definition Language）项目是一个面向航天领域的协议定义与仿真验证一体化平台。本设计文档集合描述了项目的整体架构、实现细节和相关规范。

## 2. 设计文档结构

### 2.1 01_设计文档总览
- **路径**: `02_设计文档/01_设计文档总览.md`
- **内容**: 项目设计文档结构总览
- **状态**: 已完成

### 2.2 02_架构设计
包含项目核心架构相关设计文档：

#### 2.2.1 APDL MVP实现状态总结
- **路径**: `02_设计文档/02_架构设计/01_APDL_MVP实现状态总结.md`
- **内容**: MVP阶段实现状态、功能完成情况、测试验证结果
- **状态**: 已完成

#### 2.2.2 APDL语义规则系统设计说明
- **路径**: `02_设计文档/02_架构设计/02_APDL语义规则系统设计说明.md`
- **内容**: 语义规则分类、架构设计、实现特点、协议支持
- **状态**: 已完成

#### 2.2.3 APDL DSL语法规范
- **路径**: `02_设计文档/02_架构设计/03_APDL_DSL语法规范.md`
- **内容**: DSL语法定义、字段定义规范、语义规则语法、完整示例
- **状态**: 已完成

### 2.3 待创建文档（预留结构）
#### 2.3.4 协议仿真验证引擎设计
- **路径**: `02_设计文档/02_架构设计/04_协议仿真验证引擎设计.md`
- **内容**: 仿真引擎架构、验证算法、性能优化
- **状态**: 待创建

#### 2.3.5 扩展性设计规范
- **路径**: `02_设计文档/02_架构设计/05_扩展性设计规范.md`
- **内容**: 规则扩展机制、插件架构、动态加载
- **状态**: 待创建

## 3. 核心概念说明

### 3.1 字段级语法单元
- 替代原有的帧级协议单元
- 支持更细粒度的协议定义
- 提高协议定义的灵活性

### 3.2 语义规则系统
- 22种预定义语义规则类型
- DSL驱动的规则定义
- 统一的规则处理接口

### 3.3 DSL语法
- 面向协议定义的领域特定语言
- 支持字段定义和语义规则
- 配置驱动的协议处理

## 4. 协议标准支持

### 4.1 CCSDS协议
- 符合CCSDS 132.0-B-3, 133.0-B-1, 232.0-B-3标准
- 同步标志、虚拟信道、序列控制等功能
- CRC校验、帧长度计算等机制

### 4.2 CAN协议
- 符合ISO 11898-1, SAE J1939, CANopen标准
- 29位扩展标识符支持
- 优先级仲裁、PGN路由等功能

## 5. 技术架构

### 5.1 核心组件
- DSL解析器 (DslParserImpl)
- 语法单元 (SyntaxUnit)
- 语义规则 (SemanticRule)
- 帧组装器 (FrameAssembler)

### 5.2 技术栈
- **编程语言**: Rust
- **设计模式**: 策略模式、配置驱动
- **架构风格**: 组件化、模块化

## 6. 扩展性设计

### 6.1 DSL驱动扩展
- 通过DSL定义新协议，无需修改核心代码
- 支持新语义规则类型的添加
- 配置化的协议处理流程

### 6.2 规则分类管理
- 数据流向控制类
- 数据完整性保障类
- 数据流状态管理类
- 数据结构映射类
- 业务逻辑处理类

## 7. 实施状态

### 7.1 MVP完成情况
- [x] 字段级语法单元架构
- [x] 22种语义规则实现
- [x] DSL解析器
- [x] 帧组装器
- [x] CCSDS和CAN协议支持
- [x] 完整测试验证

### 7.2 文档完成情况
- [x] MVP实现状态总结
- [x] 语义规则系统设计说明
- [x] DSL语法规范
- [ ] 仿真验证引擎设计（待创建）
- [ ] 扩展性设计规范（待创建）

## 8. 下一步计划

### 8.1 短期计划
- 完善现有文档
- 优化性能特征
- 增强错误处理

### 8.2 中长期计划
- 开发仿真验证引擎
- 实现图形化设计工具
- 扩展更多协议标准

## 9. 参考资料

- CCSDS 132.0-B-3 标准文档
- CCSDS 133.0-B-1 标准文档
- ISO 11898-1 标准文档
- SAE J1939 标准文档
- CANopen 标准文档

## 10. 版本控制

本文档采用版本控制系统管理，所有变更都有记录。重要变更需经过评审后合并。